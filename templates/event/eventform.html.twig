{% extends 'base.html.twig' %}

{% block title %}
    {% if app.request.attributes.get('_route') == 'edit_event' %}
        Edit Event
    {% else %}
        Create Event
    {% endif %}
{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <h2 class="mb-4 text-center">
                {% if app.request.attributes.get('_route') == 'edit_event' %}
                    Edit Event
                {% else %}
                    Create New Event
                {% endif %}
            </h2>

            {# Affichage des messages flash #}
            {% for message in app.flashes('error') %}
                <div class="alert alert-danger">
                    {{ message }}
                </div>
            {% endfor %}
            {% for message in app.flashes('message') %}
                <div class="alert alert-success">
                    {{ message }}
                </div>
            {% endfor %}

            {# Formulaire #}
            {{ form_start(form, { 'attr': { 'novalidate': 'novalidate' } }) }}
                <div class="card p-4 shadow-sm">

                    {# Champ Nom #}
                    <div class="mb-3">
                        {{ form_label(form.nom, "Nom de l'événement") }}
                        {{ form_widget(form.nom, { attr: { class: 'form-control' } }) }}
                        <div class="text-danger">
                            {{ form_errors(form.nom) }}
                        </div>
                    </div>

                    {# Champ Date #}
                    <div class="mb-3">
                        {{ form_label(form.date, "Date de l'événement") }}
                        {{ form_widget(form.date, { attr: { class: 'form-control' } }) }}
                        <div class="text-danger">
                            {{ form_errors(form.date) }}
                        </div>
                    </div>

                    {# Champ Adresse #}
                    <div class="mb-3">
                        {{ form_label(form.adresse, "Adresse") }}
                        {{ form_widget(form.adresse, { attr: { class: 'form-control' } }) }}
                        <div class="text-danger">
                            {{ form_errors(form.adresse) }}
                        </div>
                    </div>

                    {# Champ Description #}
                    <div class="mb-3">
                        {{ form_label(form.description, "Description") }}
                        {{ form_widget(form.description, { attr: { class: 'form-control' } }) }}
                        <div class="text-danger">
                            {{ form_errors(form.description) }}
                        </div>
                    </div>

                    {# Champ Image #}
                    <div class="mb-3">
                        {{ form_label(form.image, "URL de l'image") }}
                        {{ form_widget(form.image, { attr: { class: 'form-control' } }) }}
                        <div class="text-danger">
                            {{ form_errors(form.image) }}
                        </div>
                    </div>

                    {# Champ Nombre de Places #}
                    <div class="mb-3">
                        {{ form_label(form.nbr_places, "Nombre de places disponibles") }}
                        {{ form_widget(form.nbr_places, { attr: { class: 'form-control' } }) }}
                        <div class="text-danger">
                            {{ form_errors(form.nbr_places) }}
                        </div>
                    </div>

                    {# Champ Longitude #}
                    <div class="mb-3">
                        {{ form_label(form.longitude, "Longitude") }}
                        {{ form_widget(form.longitude, { attr: { class: 'form-control' } }) }}
                        <div class="text-danger">
                            {{ form_errors(form.longitude) }}
                        </div>
                    </div>

                    {# Champ Latitude #}
                    <div class="mb-3">
                        {{ form_label(form.latitude, "Latitude") }}
                        {{ form_widget(form.latitude, { attr: { class: 'form-control' } }) }}
                        <div class="text-danger">
                            {{ form_errors(form.latitude) }}
                        </div>
                    </div>

                    {# Champ Catégorie #}
                    <div class="mb-3">
                        {{ form_label(form.categorie, "Catégorie") }}
                        {{ form_widget(form.categorie, { attr: { class: 'form-select' } }) }}
                        <div class="text-danger">
                            {{ form_errors(form.categorie) }}
                        </div>
                    </div>

                    {# Bouton de soumission #}
                    <div class="text-end">
                        <button type="submit" class="btn btn-primary mt-3">
                            {% if app.request.attributes.get('_route') == 'edit_event' %}
                                Update
                            {% else %}
                                Save
                            {% endif %}
                        </button>
                    </div>

                </div>
            {{ form_end(form) }}
        </div>
    </div>
</div>
{% endblock %}
